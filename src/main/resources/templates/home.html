<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Good Thymes Virtual Grocery</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
<div class="container">
    <div align="center">
        <h1>Coronavirus Tracker Application</h1>
        <p>App for tracking all current confirmed cases</p>
    </div>
    <div class="jumbotron">
        <h1 class="display-2" th:text="${allCurrentDayCases}"></h1>
        <p class="lead">Total cases reported as of today</p>
        <hr class="my-4">
        <p>
            <span>New cases since previous day: </span>
            <span th:text="${totalNewCases}"></span>
        </p>
    </div>

    <input id="txt-search" type="text" name="keyword" placeholder="Search..." style="width: 100%">

    <table class="table" id="tmp">
        <thead class="thead-dark">
        <tr>
            <th class="w-25">State</th>
            <th class="w-25">Country</th>
            <th class="w-25">Latest total Cases</th>
            <th class="w-25">Changes since last day</th>
        </tr>
        </thead>

        <tr th:each="stat : ${allStats}" class="row-info">
            <td th:text="${stat.getState()}"></td>
            <td th:text="${stat.getCountry()}"></td>
            <td th:text="${stat.getLatestTotalCases()}"></td>
            <td th:text="${stat.getDiffFromPreviousDay()}"></td>
        </tr>

    </table>
</div>

<script>
    $('#txt-search').on('keyup', function () {
        search_table($(this).val())
    });

    function search_table(value){
        $('.row-info').each(function () {
            var found = 'false';
            $(this).each(function () {
                if($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0) {
                    found = 'true';
                }
            });
            if(found === 'true') {
                $(this).show();
            } else {
                $(this).hide();
            }
        })
    }
</script>

<style>

    #txt-search {
        width: 100%;
        outline: none;
        padding: 10px;
        margin-bottom: 10px;
        border: 2px solid #343A40;
        border-radius: 5px 0 0 5px;
        background: #d3d7db;
        transition: background 0.25s, box-shadow 0.25s;

    }

    #txt-search:focus{
        background: #E9ECEF;
        box-shadow: 0 0 2px;
    }

    ::placeholder {
        font-size: 20px;
        color: #343a40;
    }
</style>
</body>
</html>